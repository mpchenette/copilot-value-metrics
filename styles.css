:root {
  --bg: #0f172a; /* slate-900 */
  --panel: #111827; /* gray-900 */
  --text: #e5e7eb; /* gray-200 */
  --muted: #9ca3af; /* gray-400 */
  --accent: #22d3ee; /* cyan-400 */
  --accent-2: #38bdf8; /* sky-400 */
  --focus: #f59e0b; /* amber-500 */
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: radial-gradient(1200px 800px at 70% -20%, #1f2937 0%, var(--bg) 60%);
  color: var(--text);
  display: grid;
  grid-template-rows: auto 1fr;
}

.app-header {
  text-align: center;
  padding: 24px 16px 8px;
}
.variant-nav {
  display: flex;
  gap: 8px;
  justify-content: center;
  margin-bottom: 8px;
}
.btn-variant {
  display: inline-grid;
  place-items: center;
  width: 32px;
  height: 32px;
  border-radius: 8px;
  text-decoration: none;
  color: var(--text);
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.08);
  font-weight: 600;
}
.btn-variant:hover { background: rgba(255,255,255,0.12); }
.btn-variant.active {
  color: var(--accent-2);
  box-shadow: 0 0 10px rgba(56,189,248,0.25) inset;
}
.app-header h1 { margin: 0 0 6px; font-weight: 700; font-size: 44px; line-height: 1.15; }
.app-header .sub { margin: 0; color: var(--muted); font-size: 18px; }

.app-main {
  display: grid;
  grid-template-rows: 1fr auto;
  gap: 28px;
  place-items: center;
  padding: 16px;
}

.selector {
  display: grid;
  place-items: center;
  width: 100%;
}

/* Space details just under the wheels when nested inside .selector */
.selector .details { margin-top: 16px; }

.wheels {
  display: flex;
  gap: 32px; /* more breathing room between columns */
  padding: 0; /* remove extra padding to avoid card feel */
  border-radius: 0; /* no rounded container corners */
  background: transparent; /* no container background */
  box-shadow: none; /* remove outer shadow to hide the box */
  align-items: start;
  /* Let height be natural; no fixed panel height */
  min-height: 0;
  /* Allow horizontal scroll if metric names are wide */
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* Vertical separators between items (not at the edges) */
.wheels > * { position: relative; }
.wheels > * + :not(.sum)::before {
  content: '';
  position: absolute;
  left: -16px; /* half the gap */
  top: 0;
  bottom: 0;
  width: 1px;
  background: linear-gradient(
    to bottom,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,0.18) 18%,
    rgba(255,255,255,0.18) 82%,
    rgba(255,255,255,0) 100%
  );
  pointer-events: none;
}

/* Inline sum display to the right of the wheels */
.wheels .sum {
  display: grid;
  place-items: center;
  padding: 0 12px;
  font-size: 28px;
  font-weight: 700;
  color: var(--text);
  white-space: nowrap;
  font-variant-numeric: tabular-nums;
  /* Fix width to avoid panel width changes as total grows */
  width: 80px; /* fits up to 3 digits comfortably */
  /* Center vertically within the wheels container */
  align-self: center;
}

.wheel {
  display: grid;
  grid-template-rows: auto 1fr auto;
  align-items: center;
  width: 84px;
  height: 220px;
  background: transparent; /* flatten individual wheel boxes */
  border-radius: 12px;
  overflow: hidden;
  border: none;
}

/* Wider wheel for metric names â€” size to content and allow overflow visibility */
.wheel.word { width: max-content; overflow: visible; }

/* Static number wheels: just the track (labels live outside) */
.wheel.static { grid-template-rows: 1fr; }

/* Header label for number wheels */
.wheel-label {
  font-size: 18px;
  color: var(--muted);
  text-align: center;
  padding: 6px 4px 0;
  user-select: none;
  min-height: 16px; /* ensure consistent spacer height */
}

/* Column wrapper to place label above wheel */
.wheel-col {
  display: grid;
  grid-template-rows: auto 1fr;
  justify-items: center;
  row-gap: 10px; /* space between label and wheel */
}
/* Prevent manual scrolling on static number wheels */
.wheel.static .track { touch-action: none; }

.wheel:focus-within { outline: 2px solid var(--focus); outline-offset: 2px; }
/* Remove focus outline for the metric selector specifically */
.wheel.word:focus-within { outline: none; }

.wheel .btn {
  appearance: none;
  border: none;
  background: transparent;
  color: var(--muted);
  padding: 8px 0;
  cursor: pointer;
  transition: color 120ms ease;
}
.wheel .btn:hover { color: var(--text); }
.wheel .btn:active { color: var(--accent); }
.wheel .btn:focus { outline: none; }

.track {
  position: relative;
  overflow-y: auto;
  overscroll-behavior: contain;
  scroll-snap-type: y mandatory;
  scrollbar-width: none;
  -ms-overflow-style: none;
  /* Important: inside a CSS grid item, allow the track
     to shrink and actually scroll. Without min-height: 0,
     many browsers size the grid child to its content and
     wheel/trackpad scrolling won't work. */
  min-height: 0;
  height: 100%;
  /* Better touch/trackpad behavior */
  -webkit-overflow-scrolling: touch;
  touch-action: pan-y;
}
.track::-webkit-scrollbar { display: none; }

/* Soft fade-out at the top/bottom of number columns */
.wheel:not(.word) .track {
  /* Stronger fade: wider transparent edges, tighter visible band */
  /* Safari/WebKit */
  -webkit-mask-image: linear-gradient(
    to bottom,
    rgba(0,0,0,0) 0%,
    rgba(0,0,0,0) 18%,
    rgba(0,0,0,1) 35%,
    rgba(0,0,0,1) 65%,
    rgba(0,0,0,0) 82%,
    rgba(0,0,0,0) 100%
  );
  -webkit-mask-size: 100% 100%;
  -webkit-mask-repeat: no-repeat;
  /* Other modern browsers */
  mask-image: linear-gradient(
    to bottom,
    rgba(0,0,0,0) 0%,
    rgba(0,0,0,0) 18%,
    rgba(0,0,0,1) 35%,
    rgba(0,0,0,1) 65%,
    rgba(0,0,0,0) 82%,
    rgba(0,0,0,0) 100%
  );
  mask-size: 100% 100%;
  mask-repeat: no-repeat;
}

.digit {
  height: 60px;
  display: grid;
  place-items: center;
  font-size: 32px;
  font-variant-numeric: tabular-nums;
  scroll-snap-align: center;
  color: var(--muted);
  transition: opacity 160ms ease, color 160ms ease;
}

/* Larger font for metric names */
.digit.word {
  font-size: 26px;
  padding: 0 12px;
  text-align: center;
  white-space: nowrap;          /* keep names on a single line */
}

.digit[aria-selected="true"] { color: var(--accent-2); text-shadow: 0 0 16px rgba(56,189,248,0.35); }

/* Dim unselected digits in number wheels (not the word wheel) */
.wheel:not(.word) .digit { opacity: 0.35; }
.wheel:not(.word) .digit[aria-selected="true"] { opacity: 1; }


/* Details panel */
.details {
  width: 100%;
  max-width: 920px;
  display: grid;
  gap: 12px;
}
/* (details header removed) */
.details-grid {
  display: flex;
  flex-direction: column;
  gap: 0;
  padding: 12px;
  background: rgba(255,255,255,0.04);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 10px;
}
.detail-item { padding: 0; background: transparent; border: 0; border-radius: 0; }
.detail-item.row {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 10px;
  align-items: start;
  padding: 10px 0;
}
.details-grid .detail-item + .detail-item { border-top: 1px solid rgba(255,255,255,0.06); }
.detail-summary {
  display: grid;
  grid-template-columns: auto auto 1fr; /* caret, badge, title */
  align-items: center;
  gap: 10px;
  padding: 10px 0;
  cursor: pointer;
  list-style: none;
}
.detail-summary::-webkit-details-marker { display: none; }
.detail-summary::marker { content: ''; }
.detail-body { padding: 0 0 12px 0; }
.detail-caret { color: var(--muted); width: 16px; text-align: center; }
/* Caret styling and interaction */
body[data-variant="2"] .detail-caret { width: 24px; display: grid; place-items: center; }
body[data-variant="2"] .detail-caret svg { width: 18px; height: 18px; transition: transform 160ms ease; }
body[data-variant="2"] details[open] .detail-caret svg { transform: rotate(180deg); }
.detail-badge {
  display: grid;
  place-items: center;
  width: 40px;
  height: 40px;
  border-radius: 8px;
  background: linear-gradient(180deg, rgba(56,189,248,0.25), rgba(56,189,248,0.05));
  color: var(--accent-2);
  font-weight: 700;
  font-size: 20px;
  font-variant-numeric: tabular-nums;
}
.detail-content {
  display: grid;
  gap: 4px;
}
.detail-title {
  font-size: 16px;
  color: var(--muted);
}
.detail-text {
  font-size: 16px;
  line-height: 1.5rem;
}

/* Variant 2: details tray blends into background */
body[data-variant="2"] .details-grid {
  background: transparent;
  border: none;
  padding: 0;
}
body[data-variant="2"] .details-grid .detail-item + .detail-item {
  border-top: none;
}
body[data-variant="2"] .detail-summary { padding: 8px 0; }
body[data-variant="2"] .detail-body { padding: 0 0 10px 26px; }
/* Make score badges look like the numbers above */
body[data-variant="2"] .detail-badge {
  width: auto;
  height: auto;
  background: transparent;
  border-radius: 0;
  font-size: 32px;
  color: var(--accent-2);
  text-shadow: 0 0 16px rgba(56,189,248,0.35);
  font-variant-numeric: tabular-nums;
  padding: 0 4px;
}

/* Variant 2: add outlines to visualize boxes for simplification */
body[data-variant="2"] .wheels { outline: 1px dashed rgba(255,255,255,0.12); outline-offset: 4px; }
body[data-variant="2"] .wheel-col { outline: 1px solid rgba(255,255,255,0.18); outline-offset: -2px; border-radius: 8px; }
body[data-variant="2"] .wheel { outline: 1px dashed rgba(255,255,255,0.18); outline-offset: -2px; border-radius: 12px; }
body[data-variant="2"] .details-grid { outline: 1px solid rgba(255,255,255,0.18); outline-offset: -2px; border-radius: 8px; }
body[data-variant="2"] .detail-item { outline: 1px dashed rgba(255,255,255,0.18); border-radius: 6px; margin: 4px 0; }

/* Variant 2: scale up UI ~1.6x for readability */
/* Variant 2: increase inter-column spacing for more breathing room */
body[data-variant="2"] .wheels { gap: 80px; }
/* Make wheels taller so ~5 items are visible in the viewport */
body[data-variant="2"] .wheel { width: 126px; height: 560px; }
body[data-variant="2"] .digit { height: 90px; font-size: 48px; }
/* Ensure metric selector (word wheel) fully expands to its content on one line */
body[data-variant="2"] .wheel.word { width: max-content; overflow: visible; }
body[data-variant="2"] .wheel.word .digit.word { font-size: 40px; padding: 0 20px; white-space: nowrap; }
/* Variant 2: gentle vertical fade on the metric selector track */
body[data-variant="2"] .wheel.word .track {
  /* Safari/WebKit */
  -webkit-mask-image: linear-gradient(
    to bottom,
    rgba(0,0,0,0) 0%,
    rgba(0,0,0,0.12) 12%,
    rgba(0,0,0,0.28) 24%,
    rgba(0,0,0,0.5) 32%,
    rgba(0,0,0,0.85) 42%,
    rgba(0,0,0,1) 48%,
    rgba(0,0,0,1) 52%,
    rgba(0,0,0,0.85) 58%,
    rgba(0,0,0,0.5) 68%,
    rgba(0,0,0,0.28) 76%,
    rgba(0,0,0,0.12) 88%,
    rgba(0,0,0,0) 100%
  );
  -webkit-mask-size: 100% 100%;
  -webkit-mask-repeat: no-repeat;
  /* Other modern browsers */
  mask-image: linear-gradient(
    to bottom,
    rgba(0,0,0,0) 0%,
    rgba(0,0,0,0.12) 12%,
    rgba(0,0,0,0.28) 24%,
    rgba(0,0,0,0.5) 32%,
    rgba(0,0,0,0.85) 42%,
    rgba(0,0,0,1) 48%,
    rgba(0,0,0,1) 52%,
    rgba(0,0,0,0.85) 58%,
    rgba(0,0,0,0.5) 68%,
    rgba(0,0,0,0.28) 76%,
    rgba(0,0,0,0.12) 88%,
    rgba(0,0,0,0) 100%
  );
  mask-size: 100% 100%;
  mask-repeat: no-repeat;
}
body[data-variant="2"] .wheel-label { font-size: 28px; }
body[data-variant="2"] .wheel .btn { padding: 12px 0; font-size: 18px; }
/* Adjust separator visual to align with larger gap */
body[data-variant="2"] .wheels > * + *::before { width: 80px; left: -40px; }
/* Bigger operator size for Variant 2 and auto width */
body[data-variant="2"] .wheels .sum { width: auto; font-size: 48px; padding: 0 16px; }
/* Details typography scale */
body[data-variant="2"] .detail-badge { font-size: 48px; }
body[data-variant="2"] .detail-title { font-size: 22px; }
body[data-variant="2"] .detail-text { font-size: 20px; line-height: 1.75rem; }
body[data-variant="2"] .detail-caret { font-size: 18px; }
/* Show trailing + in each summary except last; add a column for it */
/* Summary layout: badge | title | caret-right */
body[data-variant="2"] .detail-summary { grid-template-columns: auto 1fr auto; }
/* Separator plus between categories */
body[data-variant="2"] .detail-sep {
  text-align: center;
  color: var(--muted);
  font-size: 32px;
  line-height: 1;
  padding: 4px 0 6px;
}
/* Variant 2 layout behavior: keep columns pinned while details scrolls */
body[data-variant="2"] .app-main { place-items: center; }
body[data-variant="2"] .selector { place-items: center; }
/* Fix the details column height and allow internal scrolling so expanding
   a row only pushes rows below within the pane, not the whole layout. */
/* Center the Breakdown content within its box when there is extra space */
body[data-variant="2"] .details-col .details {
  height: 560px;
  overflow-y: auto;
  display: grid;
  align-content: center; /* centers details-grid when shorter than 560px */
}
body[data-variant="2"] .details-col .details-grid { min-height: 0; }
.detail-content {
  display: grid;
  gap: 4px;
}
.detail-title {
  font-size: 16px;
  color: var(--muted);
}
.detail-text {
  font-size: 16px;
  line-height: 1.5rem;
}

@media (max-width: 520px) {
  .app-header h1 { font-size: 32px; }
  .app-header .sub { font-size: 14px; }
  .wheel { width: 72px; height: 200px; }
  .wheel.word { width: max-content; }
  .digit { height: 52px; font-size: 28px; }
  .digit.word { font-size: 20px; }
  .wheel-label { font-size: 15px; }
}
